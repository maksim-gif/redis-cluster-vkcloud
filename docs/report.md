ОТЧЕТ ПО РАЗВЕРТЫВАНИЮ REDIS CLUSTER С SENTINEL






















**Подготовил:** Панютин М.А. \
**Дата тестирования:** ТОЖЕ НЕ ЗАБУДЬ 


# **Оглавление**
[1. НАЧАЛЬНОЕ СОСТОЯНИЕ КЛАСТЕРА	3](#_toc213605288)

[2. ПРОЦЕСС ФЕЙЛОВЕРА	5](#_toc213605289)

[3. РЕЗУЛЬТАТЫ ФЕЙЛОВЕРА	6](#_toc213605290)

[4. ИТОГОВАЯ ТАБЛИЦА РЕЗУЛЬТАТОВ	7](#_toc213605291)


# **<a name="_toc213605288"></a>1. НАЧАЛЬНОЕ СОСТОЯНИЕ КЛАСТЕРА**
![](Aspose.Words.4eec0450-7820-4118-8640-f732249f622f.001.jpeg "Скриншот 09-11-2025 172930")

**Скриншот **1** Проверка репликации ДО фейловера**

![](Aspose.Words.4eec0450-7820-4118-8640-f732249f622f.002.jpeg "Скриншот 09-11-2025 173146")

**Скриншот **2** Создание тестовых данных**

![](Aspose.Words.4eec0450-7820-4118-8640-f732249f622f.003.jpeg "Скриншот 09-11-2025 173138")

**Скриншот **3** Проверка репликации данных на репликах**

![](Aspose.Words.4eec0450-7820-4118-8640-f732249f622f.004.jpeg "Скриншот 09-11-2025 173215")

**Скриншот **4** Настройка Sentinel**
# **<a name="_toc213605289"></a>2. ПРОЦЕСС ФЕЙЛОВЕРА**
![](Aspose.Words.4eec0450-7820-4118-8640-f732249f622f.005.jpeg "Скриншот 09-11-2025 173330")

**Скриншот **5** Создание маркера фейловера**

![](Aspose.Words.4eec0450-7820-4118-8640-f732249f622f.006.jpeg "Скриншот 09-11-2025 173740")

**Скриншот **6** Проверка маркера на репликах**

![](Aspose.Words.4eec0450-7820-4118-8640-f732249f622f.007.jpeg "Скриншот 09-11-2025 173602")

**Скриншот **7**  Остановка мастера**

![](Aspose.Words.4eec0450-7820-4118-8640-f732249f622f.008.jpeg "Скриншот 09-11-2025 173622")

**Скриншот **8** Мониторинг фейловера в реальном времени**

while true; do

`    `echo "=== $(date) ==="

`    `redis-cli -h 89.208.199.173 -p 26379 sentinel get-master-addr-by-name mymaster

`    `sleep 3

done

Смена мастера с 89.208.199.173 на 89.208.199.152

# **<a name="_toc213605290"></a>3. РЕЗУЛЬТАТЫ ФЕЙЛОВЕРА**
![](Aspose.Words.4eec0450-7820-4118-8640-f732249f622f.009.jpeg "Скриншот 09-11-2025 173653")

**Скриншот **9** Определение нового мастера**

![](Aspose.Words.4eec0450-7820-4118-8640-f732249f622f.010.jpeg "Скриншот 09-11-2025 173845")

**Скриншот **10** Проверка данных после фейловера**

Все данные сохранены

Маркер, тестовые строки и счетчик доступны

![](Aspose.Words.4eec0450-7820-4118-8640-f732249f622f.011.jpeg "Скриншот 09-11-2025 173912")

**Скриншот **11** Репликация после фейловера**

![](Aspose.Words.4eec0450-7820-4118-8640-f732249f622f.012.jpeg "Скриншот 09-11-2025 174014")

**Скриншот **12** Статус бывшего мастера**
# **<a name="_toc213605291"></a>4. ИТОГОВАЯ ТАБЛИЦА РЕЗУЛЬТАТОВ**

|**Параметр**|**Требование**|**Результат**|**Статус**|
| :-: | :-: | :-: | :-: |
|Количество узлов|3 VM|3 узла развернуты|Выполнено|
|Репликация|1 мастер + 2 реплики|Настроено и работает|Выполнено|
|Sentinel кворум|2|quorum: 2|Выполнено|
|Таймаут фейловера|10 секунд|down-after-milliseconds: 10000|Выполнено|
|Автоматический фейловер|Работает|Фейловер выполнен за ~6с|Выполнено|
|Сохранность данных|100%|Все данные сохранены|Выполнено|
|Восстановление|Автоматическое|Старый мастер стал репликой|Выполнено|

